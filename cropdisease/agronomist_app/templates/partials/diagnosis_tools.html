{% block content %} {% load static %}

<!-- Diagnosis Tools Section -->
<section id="diagnosis-tools" class="content-section" style="display: none">
  <div class="row mb-4 mt-4">
    <div class="col-md-6">
      <h4><i class="fas fa-diagnoses me-2"></i> Crop Diagnosis Tools</h4>
      <p class="text-muted">
        Identify crop diseases and get treatment recommendations
      </p>
    </div>
    <div class="col-md-6 text-md-end">
      <button class="btn btn-success me-2">
        <i class="fas fa-history me-1"></i> Diagnosis History
      </button>
      <button class="btn btn-outline-success">
        <i class="fas fa-book me-1"></i> Disease Library
      </button>
    </div>
  </div>

  <!-- Diagnosis Methods Cards -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <div
            class="bg-success bg-opacity-10 p-3 rounded-circle d-inline-block mb-3"
          >
            <i class="fas fa-camera fa-3x text-success"></i>
          </div>
          <h5>Image Diagnosis</h5>
          <p class="text-muted">
            Upload photos of affected crops for AI-powered analysis
          </p>
          <button
            class="btn btn-success w-100 mt-3"
            data-bs-toggle="modal"
            data-bs-target="#imageDiagnosisModal"
          >
            <i class="fas fa-upload me-1"></i> Upload Images
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <div
            class="bg-primary bg-opacity-10 p-3 rounded-circle d-inline-block mb-3"
          >
            <i class="fas fa-clipboard-question fa-3x text-primary"></i>
          </div>
          <h5>Symptom Checker</h5>
          <p class="text-muted">
            Answer questions about crop symptoms to identify potential issues
          </p>
          <button
            class="btn btn-primary w-100 mt-3"
            data-bs-toggle="modal"
            data-bs-target="#symptomCheckerModal"
          >
            <i class="fas fa-play me-1"></i> Start Diagnosis
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <div
            class="bg-warning bg-opacity-10 p-3 rounded-circle d-inline-block mb-3"
          >
            <i class="fas fa-vial fa-3x text-warning"></i>
          </div>
          <h5>Lab Test Analysis</h5>
          <p class="text-muted">
            Enter lab test results for professional diagnosis
          </p>
          <button
            class="btn btn-warning w-100 mt-3"
            data-bs-toggle="modal"
            data-bs-target="#labTestModal"
          >
            <i class="fas fa-flask me-1"></i> Enter Results
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Diagnoses -->
  <div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <div>
        <span>Recent Diagnoses</span>
        <span class="badge bg-primary ms-2">24</span>
      </div>
      <div class="dropdown">
        <button
          class="btn btn-outline-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
        >
          <i class="fas fa-filter me-1"></i> Filter
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#">All Diagnoses</a></li>
          <li><a class="dropdown-item" href="#">Last 7 Days</a></li>
          <li><a class="dropdown-item" href="#">High Confidence</a></li>
          <li><a class="dropdown-item" href="#">Needs Review</a></li>
        </ul>
      </div>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th>Date</th>
              <th>Crop</th>
              <th>Diagnosis</th>
              <th>Confidence</th>
              <th>Method</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Diagnosis 1 -->
            <tr>
              <td>
                <small>Today</small>
                <div class="text-muted">10:30 AM</div>
              </td>
              <td>Tomatoes</td>
              <td>
                <strong>Late Blight</strong>
                <div class="text-muted small">Phytophthora infestans</div>
              </td>
              <td>
                <div class="progress" style="height: 6px">
                  <div class="progress-bar bg-success" style="width: 92%"></div>
                </div>
                <small>92% confidence</small>
              </td>
              <td><span class="badge bg-success">Image Analysis</span></td>
              <td><span class="badge bg-success">Confirmed</span></td>
              <td>
                <button
                  class="btn btn-sm btn-outline-primary me-1"
                  title="View"
                >
                  <i class="fas fa-eye"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-secondary"
                  title="Save Report"
                >
                  <i class="fas fa-save"></i>
                </button>
              </td>
            </tr>

            <!-- Diagnosis 2 -->
            <tr>
              <td>
                <small>Yesterday</small>
                <div class="text-muted">2:15 PM</div>
              </td>
              <td>Maize</td>
              <td>
                <strong>Fall Armyworm</strong>
                <div class="text-muted small">Spodoptera frugiperda</div>
              </td>
              <td>
                <div class="progress" style="height: 6px">
                  <div class="progress-bar bg-warning" style="width: 78%"></div>
                </div>
                <small>78% confidence</small>
              </td>
              <td><span class="badge bg-primary">Symptom Checker</span></td>
              <td><span class="badge bg-info">Pending Review</span></td>
              <td>
                <button
                  class="btn btn-sm btn-outline-primary me-1"
                  title="View"
                >
                  <i class="fas fa-eye"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-secondary"
                  title="Save Report"
                >
                  <i class="fas fa-save"></i>
                </button>
              </td>
            </tr>

            <!-- Diagnosis 3 -->
            <tr>
              <td>
                <small>Apr 22, 2023</small>
                <div class="text-muted">9:45 AM</div>
              </td>
              <td>Coffee</td>
              <td>
                <strong>Coffee Berry Disease</strong>
                <div class="text-muted small">Colletotrichum kahawae</div>
              </td>
              <td>
                <div class="progress" style="height: 6px">
                  <div class="progress-bar bg-success" style="width: 95%"></div>
                </div>
                <small>95% confidence</small>
              </td>
              <td><span class="badge bg-warning">Lab Test</span></td>
              <td><span class="badge bg-success">Confirmed</span></td>
              <td>
                <button
                  class="btn btn-sm btn-outline-primary me-1"
                  title="View"
                >
                  <i class="fas fa-eye"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-secondary"
                  title="Save Report"
                >
                  <i class="fas fa-save"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div
        class="d-flex justify-content-between align-items-center p-3 border-top"
      >
        <div>
          <small class="text-muted"
            >Showing <strong>1-10</strong> of
            <strong>24</strong> diagnoses</small
          >
        </div>
        <nav aria-label="Page navigation">
          <ul class="pagination pagination-sm mb-0">
            <li class="page-item disabled">
              <a class="page-link" href="#" tabindex="-1" aria-disabled="true"
                >Previous</a
              >
            </li>
            <li class="page-item active">
              <a class="page-link" href="#">1</a>
            </li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
              <a class="page-link" href="#">Next</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>

  <!-- Disease Trends -->
  <div class="card">
    <div class="card-header">
      <span>Common Diseases in Your Region</span>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-8">
          <canvas id="diseaseTrendsChart" height="250px" width="600px"></canvas>
        </div>
        <div class="col-md-4">
          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <strong>Seasonal Alert:</strong> Increased risk of Late Blight in
            tomatoes due to recent rainfall
          </div>
          <h5>Top Diseases This Month</h5>
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex justify-content-between">
                <span>Tomato Late Blight</span>
                <span class="badge bg-danger">High Risk</span>
              </div>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex justify-content-between">
                <span>Maize Rust</span>
                <span class="badge bg-warning">Moderate Risk</span>
              </div>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex justify-content-between">
                <span>Coffee Berry Disease</span>
                <span class="badge bg-primary">Low Risk</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Image Diagnosis Modal -->
  <div
    class="modal fade"
    id="imageDiagnosisModal"
    tabindex="-1"
    aria-labelledby="imageDiagnosisModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="imageDiagnosisModalLabel">
            Image Diagnosis
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div
            class="border rounded p-4 text-center bg-light mb-4"
            style="min-height: 200px"
          >
            <i class="fas fa-images fa-3x text-muted mb-3"></i>
            <p class="text-muted">
              Upload clear photos of affected leaves, stems, and fruits
            </p>
            <input
              type="file"
              class="form-control"
              id="cropImages"
              multiple
              accept="image/*"
            />
            <small class="text-muted">Maximum 5 images (JPEG, PNG)</small>
          </div>

          <div class="mb-3">
            <label class="form-label">Crop Information</label>
            <div class="row g-3">
              <div class="col-md-6">
                <select class="form-select">
                  <option selected disabled>Select Crop</option>
                  <option>Tomatoes</option>
                  <option>Maize</option>
                  <option>Wheat</option>
                  <option>Coffee</option>
                  <option>Potatoes</option>
                </select>
              </div>
              <div class="col-md-6">
                <select class="form-select">
                  <option selected disabled>Growth Stage</option>
                  <option>Seedling</option>
                  <option>Vegetative</option>
                  <option>Flowering</option>
                  <option>Fruiting</option>
                  <option>Harvest</option>
                </select>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Additional Notes</label>
            <textarea
              class="form-control"
              rows="3"
              placeholder="Describe symptoms, weather conditions, etc."
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-success">
            <i class="fas fa-search me-1"></i> Analyze Images
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Symptom Checker Modal -->
  <div
    class="modal fade"
    id="symptomCheckerModal"
    tabindex="-1"
    aria-labelledby="symptomCheckerModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="symptomCheckerModalLabel">
            Symptom Checker
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="steps">
            <div class="step active" id="step1">
              <h6>Step 1: Select Crop</h6>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-check card p-3">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="cropType"
                      id="tomatoes"
                      checked
                    />
                    <label class="form-check-label" for="tomatoes">
                      <i class="fas fa-apple-alt me-2 text-danger"></i> Tomatoes
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-check card p-3">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="cropType"
                      id="maize"
                    />
                    <label class="form-check-label" for="maize">
                      <i class="fas fa-seedling me-2 text-warning"></i> Maize
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-check card p-3">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="cropType"
                      id="wheat"
                    />
                    <label class="form-check-label" for="wheat">
                      <i class="fas fa-wheat-awn me-2 text-success"></i> Wheat
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-check card p-3">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="cropType"
                      id="coffee"
                    />
                    <label class="form-check-label" for="coffee">
                      <i class="fas fa-mug-hot me-2 text-brown"></i> Coffee
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="step" id="step2" style="display: none">
              <h6>Step 2: Describe Symptoms</h6>
              <div class="mb-3">
                <label class="form-label">Select affected plant parts:</label>
                <div class="row g-2">
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="leaves"
                      />
                      <label class="form-check-label" for="leaves">
                        <i class="fas fa-leaf me-1"></i> Leaves
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="stems"
                      />
                      <label class="form-check-label" for="stems">
                        <i class="fas fa-tree me-1"></i> Stems
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="fruits"
                      />
                      <label class="form-check-label" for="fruits">
                        <i class="fas fa-apple-alt me-1"></i> Fruits
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="roots"
                      />
                      <label class="form-check-label" for="roots">
                        <i class="fas fa-root me-1"></i> Roots
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="flowers"
                      />
                      <label class="form-check-label" for="flowers">
                        <i class="fas fa-spa me-1"></i> Flowers
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">Select visible symptoms:</label>
                <div class="row g-2">
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="spots"
                      />
                      <label class="form-check-label" for="spots">
                        <i class="fas fa-circle me-1 text-danger"></i> Spots
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="wilting"
                      />
                      <label class="form-check-label" for="wilting">
                        <i class="fas fa-tint-slash me-1 text-warning"></i>
                        Wilting
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="discoloration"
                      />
                      <label class="form-check-label" for="discoloration">
                        <i class="fas fa-palette me-1 text-success"></i>
                        Discoloration
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="mold"
                      />
                      <label class="form-check-label" for="mold">
                        <i class="fas fa-cloud me-1 text-secondary"></i> Mold
                      </label>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="holes"
                      />
                      <label class="form-check-label" for="holes">
                        <i class="fas fa-cut me-1 text-dark"></i> Holes
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">Additional Notes</label>
                <textarea
                  class="form-control"
                  rows="3"
                  placeholder="Describe the symptoms in detail"
                ></textarea>
              </div>
            </div>

            <div class="step" id="step3" style="display: none">
              <h6>Step 3: Environmental Conditions</h6>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Recent Weather</label>
                  <select class="form-select">
                    <option selected disabled>Select weather pattern</option>
                    <option>Dry and sunny</option>
                    <option>Rainy/humid</option>
                    <option>Cool temperatures</option>
                    <option>Hot temperatures</option>
                    <option>Variable weather</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Soil Conditions</label>
                  <select class="form-select">
                    <option selected disabled>Select soil condition</option>
                    <option>Well-drained</option>
                    <option>Waterlogged</option>
                    <option>Dry</option>
                    <option>Rich organic matter</option>
                  </select>
                </div>
                <div class="col-12">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="nearbyIssues"
                    />
                    <label class="form-check-label" for="nearbyIssues">
                      Are nearby plants showing similar symptoms?
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer justify-content-between">
          <button
            type="button"
            class="btn btn-outline-secondary"
            id="prevBtn"
            style="display: none"
          >
            <i class="fas fa-arrow-left me-1"></i> Previous
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-primary" id="nextBtn">
            Next <i class="fas fa-arrow-right ms-1"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}